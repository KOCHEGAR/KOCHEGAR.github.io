!function(e,n){"function"==typeof define&&define.amd?define(["ScrollMagic","jquery"],n):"object"==typeof exports?n(require("scrollmagic"),require("jquery")):n(e.ScrollMagic,e.jQuery)}(this,function(e,n){"use strict";e._util.get.elements=function(e){return n(e).toArray()},e._util.addClass=function(e,o){n(e).addClass(o)},e._util.removeClass=function(e,o){n(e).removeClass(o)},n.ScrollMagic=e}),$(document).ready(function(){var e=$("body"),n=$(".wrapper"),o=n.find(".menu"),s=o.find(".menu__trigger"),t=o.find(".menu__showable-content"),a=n.find(".main-content"),i=n.find(".darkoverlay"),r=n.find(".events__item"),l=n.find(".linkedAnchor"),d=(n.find("#linkedAnchor-1"),n.find("#linkedAnchor-2"),!1),c=$(".main-content");$(".main-content__secord"),$(".empty-space-block");s.on("click",function(n){n.preventDefault(),o.toggleClass("opened"),o.hasClass("opened")&&o.hasClass("fxd")?(e.addClass("ovHidden"),t.addClass("scrollabe-vertical")):(e.removeClass("ovHidden"),t.removeClass("scrollabe-vertical"))}),i.click(function(n){n.preventDefault(),o.removeClass("opened"),i.removeClass("opened"),e.removeClass("ovHidden")}),l.click(function(e){e.preventDefault();var n=$(this),s=n.offset().left,t=n.width(),a=0;if("linkedAnchor-1"===n.attr("id")){d=!0;var i=0;o.hasClass("opened")&&(o.removeClass("opened"),i=-1280),!o.hasClass("fxd")&&o.hasClass("fxd")||(a=26-o.width()),$("html,body").stop().animate({scrollLeft:s+t+a+i},900,function(){d=!1})}else"linkedAnchor-2"===n.attr("id")&&(d=!0,r.each(function(){$(this).removeAttr("offset").removeClass("scrolled")}),c.css({left:0}),$("html,body").stop().animate({scrollLeft:0},1300,function(){d=!1}))}),$(".events .events__item").each(function(e,n){var o=$(this),s=r.length-e;o.find(".event__number").text(s)});var f=0,v=new ScrollMagic.Controller({vertical:!1});$(".events .events__item").each(function(e,n){var o=$(this),s=o.find(".event"),t=o.find(".event__number"),a=o.find(".event__img-wrap"),i=o.find(".event__descr"),l=new TimelineMax;if(void 0!==r[e-1]){var d=r[e-1].querySelector(".event"),c=new TweenMax.to(d,1,{x:"-=639",ease:Power0.easeNone});l.add(c,"0")}var f=new TweenMax.to(s,1,{width:"+=639",ease:Power0.easeNone}),u=new TweenMax.to(a,1,{maxHeight:"+=427",ease:Power0.easeNone}),h=new TweenMax.to(i,1,{top:105,ease:Circ.easeOut}),m=new TweenMax.to(t,1,{color:"#818181",ease:Power0.easeNone});l.add(f,"0").add(u,"0").add(h,"0").add(m,"0"),new ScrollMagic.Scene({triggerElement:o,duration:340,offset:0,triggerHook:.545}).setTween(l).addIndicators().addTo(v).on("progress",function(e){console.log("Scene progress changed to "+e.progress),console.log("scrollDirection "+e.scrollDirection)})});var u=0,h=0,m=0,w=0,C=0;$(window).on("scroll",function(e){m=$(this).scrollLeft(),f=m,C=$(this).width(),menuWidth=o.width(),u=C/2,h=o.width(),0===f&&o.hasClass("fxd")?(o.removeClass("fxd").css({opacity:0}).stop().animate({opacity:1},650),a.removeClass("fixed-menu")):f>=menuWidth&&!o.hasClass("fxd")&&!o.hasClass("opened")&&(o.addClass("fxd").css({opacity:0}).stop().animate({opacity:1},650),a.addClass("fixed-menu")),r.each(function(e,n){var o=$(this),s=o.offset().left,t=o.offset().left+o.width();f+u>=s&&!o.hasClass("onview")&&o.css({borderColor:"green"}),f+u>=t+28-346&&o.hasClass("onview")&&o.css({borderColor:"red"})}),w=m})});