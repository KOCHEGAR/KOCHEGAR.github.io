(function(){var a;a=window.jQuery||window.Zepto||window.$,a.fn.fancySelect=function(b){var c,d;return null==b&&(b={}),d=a.extend({forceiOS:!1,includeBlank:!1,optionTemplate:function(a){return a.text()},triggerTemplate:function(a){return a.text()}},b),c=!!navigator.userAgent.match(/iP(hone|od|ad)/i),this.each(function(){var b,e,f,g,h,i,j;if(g=a(this),!g.hasClass("fancified")&&"SELECT"===g[0].tagName)return g.addClass("fancified"),g.css({width:1,height:1,display:"block",position:"absolute",top:0,left:0,opacity:0}),g.wrap('<div class="fancy-select">'),j=g.parent(),g.data("class")&&j.addClass(g.data("class")),j.append('<div class="trigger">'),c&&!d.forceiOS||j.append('<ul class="options">'),h=j.find(".trigger"),f=j.find(".options"),e=g.prop("disabled"),e&&j.addClass("disabled"),i=function(){var a;return a=d.triggerTemplate(g.find(":selected")),h.html(a)},g.on("blur.fs",function(){if(h.hasClass("open"))return setTimeout(function(){return h.trigger("close.fs")},120)}),h.on("close.fs",function(){return h.removeClass("open"),f.removeClass("open")}),h.on("click.fs",function(){var b,i;if(!e)if(h.toggleClass("open"),c&&!d.forceiOS){if(h.hasClass("open"))return g.focus()}else if(h.hasClass("open")&&(i=h.parent(),b=i.offsetParent(),i.offset().top+i.outerHeight()+f.outerHeight()+20>a(window).height()+a(window).scrollTop()?f.addClass("overflowing"):f.removeClass("overflowing")),f.toggleClass("open"),!c)return g.focus()}),g.on("enable",function(){return g.prop("disabled",!1),j.removeClass("disabled"),e=!1,b()}),g.on("disable",function(){return g.prop("disabled",!0),j.addClass("disabled"),e=!0}),g.on("change.fs",function(a){return a.originalEvent&&a.originalEvent.isTrusted?a.stopPropagation():i()}),g.on("keydown",function(a){var b,c,d;if(d=a.which,b=f.find(".hover"),b.removeClass("hover"),f.hasClass("open")){if(38===d?(a.preventDefault(),b.length&&b.index()>0?b.prev().addClass("hover"):f.find("li:last-child").addClass("hover")):40===d?(a.preventDefault(),b.length&&b.index()<f.find("li").length-1?b.next().addClass("hover"):f.find("li:first-child").addClass("hover")):27===d?(a.preventDefault(),h.trigger("click.fs")):13===d||32===d?(a.preventDefault(),b.trigger("mousedown.fs")):9===d&&h.hasClass("open")&&h.trigger("close.fs"),c=f.find(".hover"),c.length)return f.scrollTop(0),f.scrollTop(c.position().top-12)}else if(13===d||32===d||38===d||40===d)return a.preventDefault(),h.trigger("click.fs")}),f.on("mousedown.fs","li",function(b){var d;return d=a(this),g.val(d.data("raw-value")),c||g.trigger("blur.fs").trigger("focus.fs"),f.find(".selected").removeClass("selected"),d.addClass("selected"),h.addClass("selected"),g.val(d.data("raw-value")).trigger("change.fs").trigger("blur.fs").trigger("focus.fs")}),f.on("mouseenter.fs","li",function(){var b,c;return c=a(this),b=f.find(".hover"),b.removeClass("hover"),c.addClass("hover")}),f.on("mouseleave.fs","li",function(){return f.find(".hover").removeClass("hover")}),b=function(){var b;if(i(),!c||d.forceiOS)return b=g.find("option"),g.find("option").each(function(b,c){var e;if(c=a(c),!c.prop("disabled")&&(c.val()||d.includeBlank))return e=d.optionTemplate(c),c.prop("selected")?f.append('<li data-raw-value="'+c.val()+'" class="selected">'+e+"</li>"):f.append('<li data-raw-value="'+c.val()+'">'+e+"</li>")})},g.on("update.fs",function(){return j.find(".options").empty(),b()}),b()})}}).call(this),function(a,b){"use strict";var c=Object.create(null),d=function(){return(new Date).getTime()};c.original="click","ontouchstart"in document?(c.start="touchstart",c.end="touchend"):(c.start="mousedown",c.end="mouseup"),a.event.special[b]={setup:function(e,f,g){var h=a(this),i={};h.off(c.original).on(c.original,!1).on(c.start+" "+c.end,function(a){i.event=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0]:a}).on(c.start,function(a){a.which&&1!==a.which||(i.target=a.target,i.pageX=i.event.pageX,i.pageY=i.event.pageY,i.time=d())}).on(c.end,function(a){i.target===a.target&&d()-i.time<750&&i.pageX===i.event.pageX&&i.pageY===i.event.pageY&&(a.type=b,a.pageX=i.event.pageX,a.pageY=i.event.pageY,g.call(this,a),a.isDefaultPrevented()||h.off(c.original).trigger(c.original))})},remove:function(){a(this).off(c.start+" "+c.end)}},a.fn[b]=function(a){return this[a?"on":"trigger"](b,a)}}(jQuery,"tap"),$(document).ready(function(){$(function(){function a(a){a.preventDefault(),$(".page-header__block-divider--2").toggleClass("page-header__block-divider--2-hide"),$(".dropdown-btn__cross").toggleClass("dropdown-btn__cross--show"),$(".dropdown-btn__burger").toggleClass("dropdown-btn__burger--hide")}function b(a){a.stopPropagation(),p.hasClass("catalog__categories--show")?(p.removeClass("catalog__categories--show"),q.hasClass("touch-hover")&&q.removeClass("touch-hover")):p.addClass("catalog__categories--show"),"touchend"==a.originalEvent.type&&(p.hasClass("touch-device")||p.addClass("touch-device"))}function c(){void 0!==u&&u.hasClass("favor--visible")&&d(u)}function d(a){var b=a;b.removeClass("favor--visible").addClass("favor--hidden")}function e(a){var b=a;b.removeClass("favor--hidden").addClass("favor--visible")}function f(a,b){a.preventDefault(),a.stopPropagation();var c=b.parent().parent().find(" > a"),d=b.parent(),e=d.find(".icon-heart");c.hasClass("added-state")?(c.removeClass("added-state"),b.text("Добавить в любимые бренды"),e.removeClass("icon-heart--active").addClass("icon-heart--not-active")):(c.addClass("added-state"),e.removeClass("icon-heart--not-active").addClass("icon-heart--active"),b.text("Убрать из любимых брендов"))}function g(a,b){a.stopPropagation(),a.preventDefault();var d=b.parent().find(".favor");h(a,b),c(),d.hasClass("favor--hidden")&&e(d),u=d}function h(a,b){var c=b;if("mouseup"==a.originalEvent.type){var d=c.attr("href");return window.open(d),!1}if("touchend"==a.originalEvent.type){if(c.is("[data-counter]")||c.attr("data-counter",1),1!=c.attr("data-counter")){c.removeAttr("data-counter");var d=c.attr("href");return window.open(d),!1}a.preventDefault(),c.attr("data-counter",2),setTimeout(function(){c.removeAttr("data-counter")},1500)}}$("html").removeClass("no-js");var i=$(".our-brands__letters a"),j=$(".brands"),k=$(".brands__block"),l=void 0,m=$(".brands__block .brand"),n=$(".brand__name > a"),o=$(".catalog"),p=$(".catalog__categories"),q=$(".catalog__categories-item"),r=$(".catalog__categories-item > a"),s=($(".catalog__dropdown "),$(".catalog__list-items a")),t=$(".dropdown-btn"),u=void 0;k.addClass("brands__block--not-selected"),n.before("<div class='favor favor--hidden'><span class='icon-heart icon-heart--not-active'></span><a href='#'>Добавить в любимые бренды</a></div>");var v=$(".favor"),w=$(".favor > a");r.removeAttr("target"),s.removeAttr("target"),n.removeAttr("target"),$("#js-search__select").fancySelect();var x=!1;t.on({tap:function(b){a(b)},touchstart:function(a){return"touchstart"==a.type&&(x=!0),!1},touchmove:function(b){return x&&(x=!1,a(b)),!1}}),o.on({tap:function(a){b(a)},touchstart:function(a){return"touchstart"==a.type&&(x=!0),!1},touchmove:function(a){x&&(x=!1,b(a))}}),p.on({"touchstart touchmove":function(a){a.stopPropagation()}}),r.tap(function(a){if(p.hasClass("touch-device")&&(q.hasClass("touch-hover")&&q.removeClass("touch-hover"),$(this).parent().addClass("touch-hover")),"touchend"==a.originalEvent.type&&window.matchMedia("(min-width: 64em)").matches)h(a,$(this));else{a.preventDefault();var b=$(this).attr("href");setTimeout(function(){p.removeClass("catalog__categories--show"),q.removeClass("touch-hover"),window.open(b)},100)}}),s.tap(function(a){document.location.href=$(this).attr("href"),q.removeClass("touch-hover"),p.removeClass("catalog__categories--show")}),n.on({tap:function(a){g(a,$(this))},touchstart:function(a){x=!0},touchmove:function(a){x&&(x=!1,g(a,$(this)))},mouseenter:function(){var a=$(this).parent().find(".favor");c(),u=a,e(a)},mouseleave:function(){var a=$(this).parent().find(".favor");d(a)}}),v.on({mouseenter:function(a){e($(this))},mouseleave:function(a){d($(this))}}),w.on({tap:function(a){f(a,$(this))},touchstart:function(a){x=!0},touchmove:function(a){x&&(x=!1,f(a,$(this)))}});var y=void 0;i.on("tap touchmove",function(a){if(a.preventDefault(),$(this).hasClass("active"))return!1;if(i.hasClass("active")){if(i.removeClass("active"),$(this).addClass("active"),void 0!==l){var b=l.context;l.prependTo(b),l=void 0}var c=$(this).data("char");c?(k.hide(),j.hide(),k.each(function(){var a=$(this).data("char");if(a==c){var b=$(this);void 0!==y&&y.find(".brand").removeClass("brand--selected"),l=b.find(".brands__header").detach(),b.removeClass("brands__block--not-selected").addClass("brands__block--selected"),b.show().parent().show(),$(this).find(".brand").each(function(){$(this).addClass("brand--selected")}),y=b}})):(k.hasClass("brands__block--selected")&&(k.removeClass("brands__block--selected"),k.addClass("brands__block--not-selected"),m.removeClass("brand--selected")),k.show(),j.show(),l=void 0)}}),$(document).on({tap:function(a){p.hasClass("catalog__categories--show")&&p.removeClass("catalog__categories--show"),c()}})})});